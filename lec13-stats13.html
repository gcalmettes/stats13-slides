<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=10.0, user-scalable=no">

  <title>
    Lecture 13 - Stats 13
  </title>
  <link rel="stylesheet" href="assets/reveal.js-master/css/reveal.css" />
  <!-- beige, black, blood, league, moon, night, serif, simple, sky, solarized, white -->
  <link rel="stylesheet" href="assets/reveal.js-master/css/theme/black.css" id="theme"/>
  <!-- Theme used for syntax highlighting of code -->
  <link rel="stylesheet" href="assets/reveal.js-master/lib/css/zenburn.css">
  <!-- Custom css -->
  <link rel="stylesheet" href="assets/plugins/Font-Awesome-master/css/font-awesome.min.css" />
  <link rel="stylesheet" href="assets/css/custom-gc.css" />
  <link rel="stylesheet" href="assets/plugins/reveal.js-plugins-master/menu/menu.css">

</head>

<body>
  <div class="reveal">
    <!-- ====================== CUSTOM HEADERs & FOOTERs ====================== -->
  	<header id="myHeadRight" style="position: absolute; top: 0; right:0; z-index:500; font-size: small;">
  	</header>
  	<header id="myHeadLeft" style="position: absolute; top: 0; left:0; z-index:501; fon-size: small;">
  	</header>
  	<footer id="myFootRight" style="position: absolute; bottom:0; right:0; z-index:502; font-size: small;">
  	</footer>
  	<footer id="myFootLeft" style="position: absolute; bottom:0; left:0; z-index:503;font-size: small;">
  	</footer>
  	<!-- ====================== CUSTOM HEADERs & FOOTERs ====================== -->

<div class="slides">


<section class="title-slide" data-background='assets/img/shared/bckg9.jpg' data-state="alpha-04">
  <div class="content-box framed border-muted">
    <h2>Stats 13</h2>
    <h1 style="color: #FFFFFF">Lecture 13</h1>
  </div>
    <h3 style="color: #FFFFFF; text-align: center;">
      Linear regression, the fun part
    </h3>
    <div class="col-90">
      <p class="smaller push-right">Guillaume Calmettes</p>
  </div>
</section>

<section id="linreg">
  <h3>Last time</h3>
  <div class="row">
    <div class="col-42">
      <p class="small no-margin-top">
        <span class="u em">Linear regression model:</span>
      </p>
      <p class="small">
        $\overset{\hat{}}{y}=a+mx$
      </p>
      <p class="small">
        Find the "Best fit line"
      </p>
      <p class="small">
        Minimize the residuals $y-\overset{\hat{}}{y}$ <br>
        - Sum of Squares residuals (OLS)<br>
        - Absolute residuals (ex: MAD)
      </p>
      <p class="small">
        Goodness of fit: <br>
        $R^2$, $RMSE$
      </p>
      <p class="small">
        Outliers: <br>
        y direction (increase $RMSE$) <br>
        x direction (won't affect RMSE much)
      </p>
    </div>
    <div class="col-58">
      <div class="row">
        <div class="col-40 right">
          <label>Show residuals</label>
        </div>
        <div class="col-10 left">
          <input type="checkbox" id="checkbox_resid" value="resid_checked">
        </div>
        <div class="col-40">
          <button id="reset_button" class="btn-info btn-large">Reset</button>
        </div>
      </div>
        <div class="placeholder"></div>
    </div>
  </div>
  
</section>

<section>
  <h3>Today</h3>
  <p>
    We will see how useful linear regression analysis can be to better understand a dataset and 
    apply this method to a 
    <span class="info">broad array</span>
     of situations (prediction, inference)
  </p>
  <p>
    We will try to understand how to do estimation and testing and how they "fit" together (see what I did here?)
  </p>
</section>


<section>
  <h3>Linear regression for prediction</h3>
  <div class="row">
    <div class="col-100">
      <svg width="100%" viewBox="0 0 504 259.2" style="margin-top: 0;">
        <use xlink:href="assets/img/lec/regression-train-test-sets-split.svg#layer0"></use>
        <use class="fragment" xlink:href="assets/img/lec/regression-train-test-sets-split.svg#layer1"></use>
        <use class="fragment" xlink:href="assets/img/lec/regression-train-test-sets-split.svg#layer2"></use>
        <use class="fragment" xlink:href="assets/img/lec/regression-train-test-sets-split.svg#layer3"></use>
        <use class="fragment" xlink:href="assets/img/lec/regression-train-test-sets-split.svg#layer4"></use>
        <use class="fragment" xlink:href="assets/img/lec/regression-train-test-sets-split.svg#layer5"></use>
      </svg>
    </div>
  </div>
</section>


<section id="linreglive">
  <h3>Let's build a linear model!</h3>
  <div class="row">
    <div class="col-30">
      <p class="no-margin-top">
        <span class="em u">Go to:</span> 
        <br> 
        <span class="warning">https://goo.gl/kjvEqE</span>
      </p>
      <p class="no-margin-top">
        <span class="em u">Enter your:</span>
        <br>
        - Height (inches)
        <br>
        - Shoe Size
      </p>
      <hr>
        <label for="usr-shoe">Shoe Size:</label>
        <input type="text" id="usr-shoe" style="font-size: 0.8em; width: 3em;">
        <br>
        <input type="submit" value="Submit" id="shoeSubmit" class="btn btn-info btn-large">
      <p class="small u em">Predicted height:</p>
      <label class="big" style="display: inline-block; width: 100%; text-align: center; font-family: sans-serif;">
        <span class="info" id="pred-height">0</span> in
      </label>
    </div>
    <div class="col-70">
      <label class="big" style="display: inline-block; width: 100%; text-align: center; font-family: sans-serif;">$\overset{\hat{}}{y}=$ <span class="warning" id="b-coef">0</span> $+$ <span class="warning" id="m-coef">0</span> $x$
      </label>
    <div class="placeholder"></div>
    </div>
  </div>
</section>

<section>
  <h3>Inference</h3>
  <p class="no-margin-top small">
    So far, we only used regression methods to describe a sample (dataset) and did not make
    statistical inferences about the larger population.
    Now, we consider how to make inferences about
    a <span class="warning">relationship in the population
    </span> represented by the sample. This involves 
    estimating the <span class="warning">uncertainty of the parameters</span> of
    our model.
</p>
<p class="small em u">
  Some questions involving the
  population that we might ask when analyzing a relationship are:
</p>
<ul class="small">
  <li>Does the observed relationship <span class="info">also occur</span> in the population?</li>  
  <li>For a linear relationship, what is the 
  <span class="info">slope of the regression line</span> in the population?</li>
  <li>What is the <span class="info">mean value of the response variable</span> (y) for individuals with a specific value
  of the explanatory variable (x)?
  </li>
  <li>What <span class="info">interval of values</span> predicts the value of the response variable (y) for an individual
with a specific value of the explanatory variable (x)?</li>
</ul> 
</section>

<section>
  <h3>Linear regression to describe a population</h3>
  <p class="small no-margin-top">
    The regression equation for a simple linear relationship in a population can be written as:
    <br>
    <span class="warning" style="margin-left: 10em;">$E(Y) = \beta_0 + \beta_1X + \epsilon$</span>
  </p>
  <ul class="small">
    <li>
      $E(Y)$ represents the <span class="info">mean or expected value of y</span> for individuals in the population who all
      have the same particular value of x. Note that $\overset{\hat{}}{y}$ is an estimate of $E(Y)$
    </li>
    <li>
      $\beta_0$ is the <span class="info">intercept</span> of the line in the <span class="info">population</span>
    </li>
    <li>
      $\beta_1$ is the <span class="info">slope</span> of the regression line in the <span class="info">population</span>. <span class="em"> Note that if the slope $\beta_1 = 0$, there is no linear
      relationship in the population</span>.
    </li>
  </ul>
  <p class="small fragment">
    <i class="fa fa-arrow-circle-right danger"></i>
    Unless we measure the entire population, we cannot know the numerical values of $\beta_0$ and $\beta_1$.
    These are population parameters that we <span class="danger">estimate using the corresponding sample statistics</span>.
  </p>
</section>

<section>
  <h3>Tipping pattern</h3>
  <div class="row">
    <div class="col-60">
      <p class="small no-margin-top">
        The owner of a bistro called <span class="em">First Crush</span> in Potsdam, New York, was interested in studying the <span class="warning">tipping patterns of its patrons</span>. 
      </p>
      <p class="small no-margin-top no-margin-bottom">
        <i class="fa fa-arrow-circle-right info"></i>
        He collected restaurant bills over a 
        two-week period that he believes provide a
        good <span class="info">sample of his customers</span>. He recorded the data from 157 bills including:
      </p>
      <ul class="small">
        <li>amount of the bill</li>
        <li>amount of the tip</li>
        <li>corresponding percentage of the tip</li>
        <li>number of customers in the group</li>
        <li>whether or not a credit card was used</li>
        <li>day of the week</li>
        <li>coded identity of the server</li>
      </ul>
    </div>
    <div class="col-40">
      <img src="assets/img/lec/tipping-first-crush.jpg" width=100% class="rounded">
    </div>
  </div>
</section>

<section data-transition="slide-in fade-out">
  <h3>Tipping pattern data</h3>
  <p class="no-margin-top no-margin-bottom u em">
    1) We want to predict the tip amount based on the bill amount.
  </p>
  <div class="row">
    <div class="col-50">
      <svg width="100%" viewBox="0 0 432 288" style="margin-top: 0;">
        <use xlink:href="assets/img/lec/tipping-data-tip-vs-bill.svg#axes_1"></use>
        <use class="fragment" data-fragment-index=1 xlink:href="assets/img/lec/tipping-data-tip-vs-bill.svg#axes_2"></use>
        <use class="fragment" data-fragment-index=2 xlink:href="assets/img/lec/tipping-data-tip-vs-bill.svg#axes_4"></use>
      </svg>
    </div>
    <div class="col-50 fragment" data-fragment-index=0>
      <p class="small">
        The scatterplot of the data show:
      </p>
      <ul class="small icon">
        <li class="play">strong <span class="warning">positive relationship</span> in the data</li>
        <li class="play">few <span class="warning">outliers</span> (big tippers) above the main pattern</li>
      </ul>
    </div>
  </div>
  <p class="small fragment" data-fragment-index=1 >
    <i class="fa fa-arrow-circle-right info"></i>
    If we calculate correlation, we obtain $r=0.915$, reinforcing the fact that
    the data have a strong positive linear relationship.
  </p>
  <p class="small fragment" data-fragment-index=2 >
    <i class="fa fa-arrow-circle-right danger"></i>
    We can build a linear model of the association.
  </p>
</section>

<section data-transition="fade-in slide-out">
  <h3>Tipping pattern data</h3>
  <p class="no-margin-top no-margin-bottom u em">
    1) We want to predict the tip amount based on the bill amount.
  </p>
  <div class="row">
    <div class="col-50">
      <svg width="100%" viewBox="0 0 432 288" style="margin-top: 0;">
        <use xlink:href="assets/img/lec/tipping-data-tip-vs-bill.svg#axes_1"></use>
        <use xlink:href="assets/img/lec/tipping-data-tip-vs-bill.svg#axes_2"></use>
        <use xlink:href="assets/img/lec/tipping-data-tip-vs-bill.svg#axes_4"></use>
      </svg>
    </div>
    <div class="col-50">
      <p class="small no-margin-top">
        Regression line equation: <br>
        $y=-0.292+\texclass{danger}{0.182}x$ <br>
        <span class="em">What does this slope mean?</span>
      </p>
      <p class="small">
        <span class="warning">$R^2=0.837$</span><br>
        <span class="em">What does this $R^2$ mean?</span>
      </p>
    </div>
  </div>
  <p class="small fragment no-margin-top no-margin-bottom" data-fragment-index=1 >
    <i class="fa fa-arrow-circle-right danger"></i>
    The slope of $0.182$ indicates that for every extra dollar in the restaurant bill the tip will increase, <span class="danger">on average</span>, by about $\$0.18$. (The <span class="danger">typical</span> tip rate at this restaurant is <span class="danger">roughly</span> $18\%$ of the total bill.)
  </p>
  <p class="small fragment no-margin-top" data-fragment-index=2 >
    <i class="fa fa-arrow-circle-right warning"></i>
    $\approx 84\%$ of the variation in the amount in tip can be <span class="warning">explained</span> by the variation in bill amount
  </p>
</section>

<section>
  <h3>Inference about the slope</h3>
  <p class="framed border-warning small no-margin-top">
    How to get an estimate of the <span class="warning">true value of the average tip rate</span> at <span class="em">First Crush</span>?
  </p>
  <p class="small fragment no-margin-bottom" data-fragment-index=1>
    <i class="fa fa-arrow-circle-right warning"></i>
    Compute the $95\%$ confidence intervals of the 
    slope (<span class="warning">$\beta_1$</span>) for the relationship between tip amount and bill amount.
  </p>
  <div class="row">
    <div class="col-50">
      <p class="small framed border-info fragment" data-fragment-index=2>
        <span class="info u em">Method #1:</span>
        Bootstrap of the (x,y) pairs data points.
      </p>
      <p class="small fragment no-margin-top" data-fragment-index=3>
        <i class="fa fa-arrow-circle-right info"></i>
        generation of pseudo data is the more usual
        form of bootstrapping for regression analysis.
        The approach is robust
        in that if an incorrect model is fitted an
        <span class="info">appropriate measure of parameter
        uncertainty</span> is still obtained.
      </p>
    </div>
    <div class="col-50">
      <p class="small framed border-danger fragment" data-fragment-index=2>
        <span class="danger u em">Method #2:</span>
        Bootstrap of the residuals.
      </p>
      <p class="small fragment no-margin-top" data-fragment-index=3>
        <i class="fa fa-arrow-circle-right danger"></i>
        implicitly <span class="danger">assumes that the functional form of the model is correct</span> (even though no assumption is made about the shape of the error distribution).
      </p>
    </div>
  </div>
</section>

<section>
  <h3>Bootstrap CIs for regression</h3>
  <img src="assets/img/lec/regression-ci95.svg" 
  class="unbordered flat" width=90%>
</section>

<section data-transition="slide-in fade-out">
  <h3>Inference about the slope</h3>
  <div class="row">
    <div class="col-90">
      <svg width="100%" viewBox="0 0 432 288" style="margin-top: 0;">
        <use xlink:href="assets/img/lec/tipping-data-tip-vs-bill.svg#axes_1"></use>
        <use class="fragment" data-fragment-index=1 xlink:href="assets/img/lec/tipping-data-tip-vs-bill.svg#axes_3"></use>
        <use xlink:href="assets/img/lec/tipping-data-tip-vs-bill.svg#axes_2"></use>
        <use xlink:href="assets/img/lec/tipping-data-tip-vs-bill.svg#axes_4"></use>
      </svg>
    </div>
  </div>
</section>

<section data-transition="fade-in slide-out">
  <h3>Inference about the slope</h3>
  <div class="row">
    <div class="col-50">
      <p class="no-margin-top small u em">
        Slope sampling distribution
      </p>
      <svg width="100%" viewBox="0 0 432 288" style="margin-top: 0;">
        <use xlink:href="assets/img/lec/tipping-resampling-slope-ci95.svg#axes_1"></use>
        <use class="fragment" data-fragment-index=1 xlink:href="assets/img/lec/tipping-resampling-slope-ci95.svg#axes_2"></use>
        <use class="fragment" data-fragment-index=2 xlink:href="assets/img/lec/tipping-resampling-slope-ci95.svg#axes_3"></use>
      </svg>
      <p class="no-margin-top smaller">
        <i class="fa fa-arrow-circle-right danger"></i>
        We are 95% confident that the true value of the <span class="danger">population slope $\beta_1$</span> is in the interval $(0.166, 0.201)$. The true 
        <span class="danger">average tipping
        rate</span> of the patrons of <span class="em">First Crush</span> is 
        between $16\%$ and $20\%$.
      </p>
    </div>
    <div class="col-50">
      <p class="no-margin-top small u em center">
        Intercept sampling distribution
      </p>
      <svg width="100%" viewBox="0 0 432 288" style="margin-top: 0;">
        <use xlink:href="assets/img/lec/tipping-resampling-intercept-ci95.svg#axes_1"></use>
        <use class="fragment" data-fragment-index=1 xlink:href="assets/img/lec/tipping-resampling-intercept-ci95.svg#axes_2"></use>
        <use class="fragment" data-fragment-index=2 xlink:href="assets/img/lec/tipping-resampling-intercept-ci95.svg#axes_3"></use>
      </svg>
      <p class="no-margin-top smaller">
        <i class="fa fa-arrow-circle-right warning"></i>
        We are 95% confident that the true value of the <span class="warning">population intercept $\beta_0$</span> is in the interval $(-0.674, 0.048)$. If there is 
        <span class="warning">no bill</span>, there is probably <span class="warning">no tip</span> <i class="fa fa-smile-o"></i>
      </p>
    </div>
  </div>
</section>

<section data-transition="slide-in fade-out">
  <h3>What about tip percentage?</h3>
  <p class="no-margin-top small">
    Most people use a fairly regular percentage (which may vary from person to person) of the total bill when deciding how big a tip to leave. 
  </p>
  <p class="no-margin-top small">
    Some economists have theorized that
    <span class="warning">i) people tend to reduce that percentage when the bill gets large</span>, but in the other hand
    <span class="warning">ii) larger groups of customers might be more generous as a group due to peer pressure</span>.
    (<span class="em">Loewenstein, G. and Prelec, D. (1992). Anomalies in Intertemporal Choice: Evidence and an Interpretation, Quarterly Journal of Economics, 1992;107:573â€“97</span>)
  </p>
  <p class="no-margin-top no-margin-bottom framed border-info">
    How could we study these two questions using 
    our dataset? <br>
    Could we use regression analysis? What parameter would
    particularly be of interest?
  </p>
</section>



<section data-transition="fade">
  <h3>What about tip percentage?</h3>
  <div class="row">
    <div class="col-45">
      <p class="smaller no-margin-top">
        From our dataset, we can calculate the percentage
        of the bill that each tip represents, and display
        the scatterplot of the percentage in fuction of 
        the total bill.
      </p>
      <p class="fragment smaller" data-fragment-index=2>
        <i class="fa fa-arrow-circle-right danger"></i>
        We can compute the $95\%$ confidence interval of 
        the slope of this regression line and check if 
        $0$ (no positive association) is inside.
      </p>
    </div>
    <div class="col-55">
      <svg width="100%" viewBox="0 0 432 288" style="margin-top: 0;">
        <use xlink:href="assets/img/lec/tipping-data-pcenttip-vs-bill.svg#axes_1"></use>
        <use class="fragment" data-fragment-index=4 xlink:href="assets/img/lec/tipping-data-pcenttip-vs-bill.svg#axes_4"></use>
        <use xlink:href="assets/img/lec/tipping-data-pcenttip-vs-bill.svg#axes_3"></use>
        <use class="fragment" data-fragment-index=1 xlink:href="assets/img/lec/tipping-data-pcenttip-vs-bill.svg#axes_2"></use>
      </svg>
    </div>
  </div>
  <p class="small fragment no-margin-top" data-fragment-index=3>
    <i class="fa fa-arrow-circle-right warning"></i>
    We select bootstrap samples (pairs, n=157), with replacement, from the dataset. For each bootstrap sample, we run the regression model, compute the sample slope, and save it to form the bootstrap distribution.
  </p>
</section>

<section data-transition="fade-in slide-out">
  <h3>What about tip percentage?</h3>
  <div class="row">
    <div class="col-45">
      <p class="smaller no-margin-top">
        From our dataset, we can calculate the percentage
        of the bill that each tip represents, and display
        the scatterplot of the percentage in fuction of 
        the total bill.
      </p>
      <p class="smaller">
        <i class="fa fa-arrow-circle-right danger"></i>
        We can compute the $95\%$ confidence interval of 
        the slope of this regression line and check if 
        $0$ (no positive association) is inside.
      </p>
    </div>
    <div class="col-55">
      <svg width="100%" viewBox="0 0 432 288" style="margin-top: 0;">
        <use xlink:href="assets/img/lec/tipping-resampling-pcenttipping-slope-ci95.svg#axes_1"></use>
        <use xlink:href="assets/img/lec/tipping-resampling-pcenttipping-slope-ci95.svg#axes_2"></use>
        <use class="fragment" data-fragment-index=1 xlink:href="assets/img/lec/tipping-resampling-pcenttipping-slope-ci95.svg#axes_3"></use>
      </svg>
    </div>
  </div>
  <p class="small fragment no-margin-top" data-fragment-index=4>
    <i class="fa fa-arrow-circle-right warning"></i>
    It does <span class="warning">not include the null value of zero</span>, so we reject $H_0$ in favor of a two-tailed alternative at a the $5\%$ level. In fact, since the confidence interval includes only positive values, this strongly suggests that the true slope is above zero. Thus we have evidence that there is some <span class="warning">positive relationship between the amount of a tip and the size of a bill</span> at this restaurant.
  </p>
</section>

<section data-transition="slide-in fade-out">
  <h3>What about the outliers?</h3>
  <div class="row">
    <div class="col-50">
      <svg width="100%" viewBox="0 0 432 288" style="margin-top: 0;">
        <use class="fragment" data-fragment-index=1 xlink:href="assets/img/lec/tipping-data-tip-vs-bill.svg#axes_5"></use>
        <use xlink:href="assets/img/lec/tipping-data-tip-vs-bill.svg#axes_1"></use>
      </svg>
    </div>
    <div class="col-50">
      <svg width="100%" viewBox="0 0 432 288" style="margin-top: 0;">
        <use class="fragment" data-fragment-index=1 xlink:href="assets/img/lec/tipping-data-pcenttip-vs-bill.svg#axes_5"></use>
        <use xlink:href="assets/img/lec/tipping-data-pcenttip-vs-bill.svg#axes_1"></use>
      </svg>
    </div>
  </div>
  <p class="small no-margin-top no-margin-bottom">
    The scatterplot show a <span class="danger">few possible outliers</span> from the pattern of the rest of the data. Three very generous customers left tips that were more than 30% of the bill. 
  </p>
  <p class="small quoted">
    Do those points have had a <span class="warning">large effect on the conclusions we did</span> based on the slopes of either of the relationships we studied?
  </p>
</section>

<section data-transition="fade">
  <h3>What about the outliers?</h3>
  <div class="row">
    <div class="col-50">
      <svg width="100%" viewBox="0 0 432 288" style="margin-top: 0;">
        <use xlink:href="assets/img/lec/tipping-data-tip-vs-bill.svg#axes_5"></use>
        <use xlink:href="assets/img/lec/tipping-data-tip-vs-bill.svg#axes_1"></use>
      </svg>
    </div>
    <div class="col-50">
      <svg width="100%" viewBox="0 0 432 288" style="margin-top: 0;">
        <use xlink:href="assets/img/lec/tipping-data-pcenttip-vs-bill.svg#axes_5"></use>
        <use xlink:href="assets/img/lec/tipping-data-pcenttip-vs-bill.svg#axes_1"></use>
      </svg>
    </div>
  </div>
  <p class="small framed border-warning">
    One way to investigate this question is to omit those cases from the data and re-run the analysis without them.
  </p>
</section>

<section data-transition="fade">
  <h3>What about the outliers?</h3>
  <div class="row">
    <div class="col-50">
      <svg width="100%" viewBox="0 0 432 288" style="margin-top: 0;">
        <use xlink:href="assets/img/lec/tipping-data-tip-vs-bill.svg#axes_5"></use>
        <use xlink:href="assets/img/lec/tipping-data-tip-vs-bill.svg#axes_1"></use>
      </svg>
    </div>
    <div class="col-50">
      <svg width="100%" viewBox="0 0 432 288" style="margin-top: 0;">
        <use xlink:href="assets/img/lec/tipping-data-pcenttip-vs-bill.svg#axes_5"></use>
        <use xlink:href="assets/img/lec/tipping-data-pcenttip-vs-bill.svg#axes_1"></use>
      </svg>
    </div>
  </div>
  <div class="row">
    <table class="table-vert">
      <col width=30%>
      <col width=35%>
      <col width=35%>
      <tbody>
        <tr>
          <td style="border-left: none;"></td>
          <td class="bg-info">Tip vs Bill</td>
          <td class="bg-danger">Tip (%) vs Bill</td>
        </tr>
        <tr style="border-bottom: 1px solid">
          <td>Full dataset</td>
          <td>$y=-0.292+\texclass{warning}{0.182}x$</td>
          <td>$y=15.508+\texclass{warning}{0.049}x$</td>
        </tr>
        <tr style="border-bottom: 1px solid">
          <td>No outliers</td>
          <td>$y=-0.404+\texclass{warning}{0.183}x$</td>
          <td>$y=14.918+\texclass{warning}{0.056}x$</td>
        </tr>
      </tbody>
    </table>
  </div>
</section>

<section data-transition="fade-in slide-out">
  <h3>What about the outliers?</h3>
  <div class="row">
    <table class="table-vert">
      <col width=30%>
      <col width=35%>
      <col width=35%>
      <tbody>
        <tr>
          <td style="border-left: none;"></td>
          <td class="bg-info">Tip vs Bill</td>
          <td class="bg-danger">Tip (%) vs Bill</td>
        </tr>
        <tr style="border-bottom: 1px solid">
          <td>Full dataset</td>
          <td>$y=-0.292+\texclass{warning}{0.182}x$</td>
          <td>$y=15.508+\texclass{warning}{0.049}x$</td>
        </tr>
        <tr style="border-bottom: 1px solid">
          <td>No outliers</td>
          <td>$y=-0.404+\texclass{warning}{0.183}x$</td>
          <td>$y=14.918+\texclass{warning}{0.056}x$</td>
        </tr>
      </tbody>
    </table>
  </div>
  <p class="small">
    <i class="fa fa-arrow-circle-right info"></i>
    After dropping the three generous data points, we see
    that the outliers have a negligible effect on the slopes of the relationships we studied.
  </p>
  <div class="row">
    <table class="table-vert">
      <col width=30%>
      <col width=35%>
      <col width=35%>
      <tbody>
        <tr>
          <td style="border-left: none;"></td>
          <td class="bg-info">Tip vs Bill</td>
          <td class="bg-danger">Tip (%) vs Bill</td>
        </tr>
        <tr style="border-bottom: 1px solid">
          <td>Full dataset</td>
          <td>$[0.166, 0.201]$</td>
          <td>$[0.005, 0.094]$</td>
        </tr>
        <tr style="border-bottom: 1px solid">
          <td>No outliers</td>
          <td>$[0.168, 0.202]$</td>
          <td>$[0.015, 0.101]$</td>
        </tr>
      </tbody>
    </table>
  </div>
  <p class="small">
    <i class="fa fa-arrow-circle-right info"></i>
    The 95% confidence intervals for these slopes, based on the data without outliers, are a bit narrower, but otherwise similar to what we obtained, from the full dataset.
  </p>
  <p class="small">
    <i class="fa fa-arrow-circle-right warning"></i>
    The outliers did not affect our conclusions.
  </p>
</section>

<section>
  <h3>Scope of our conclusions?</h3>
  <p class="small no-margin-top">
    <span class="u em info">Data Collection:</span>
    What population can we draw inferences about from the dataset we anlayze?
    The sample was generated by collecting <span class="info">all bills over several nights at the <span class="em">First Crush</span> restaurant</span>.
  </p>
  <p class="small no-margin-top fragment" data-fragment-index=1>
    <i class="fa fa-arrow-circle-right warning"></i>
    Because the data are all from one restaurant, the population of interest is all bills and tips at this restaurant. 
  </p>
  <p class="small no-margin-top fragment" data-fragment-index=1>
    <i class="fa fa-arrow-circle-right warning"></i>
    The original sample was <span class="warning">not a random sample of all bills</span>, but rather the data were collected from all bills in a <span class="warning">certain time frame</span>. That might introduce bias if the days for the bills in the sample are different in some substantial way (for example, over a holiday season or only weekends). However, <span class="warning">the owner indicates</span> that the days for which bills were sampled are <span class="warning">representative of the business at his restaurant</span>. 
  </p>
  <p class="small no-margin-top fragment" data-fragment-index=1>
    <i class="fa fa-arrow-circle-right warning"></i>
    As data analysts we might alert the owner to the <span class="warning">possibility of bias</span> when reporting our findings, but we proceed for now with the assumption that the sample is representative of all bills at this restaurant.
  </p>
</section>


<section>
  <h3>The 1970 military draft lottery</h3>
  <div class="row">
    <div class="col-55">
      <p class="small">
        In November of 1969, with the Vietnam War raging, President Nixon signed an executive order to reinstitute <span class="warning">the draft</span>. Men were drafted to fill vacancies in the United States Armed Forces that could not be filled through voluntary means.
      </p>
      <p class="small">
        In an attempt to expose male youth <span class="info">"fairly" to the risk of being drafted</span>, the Selective Service held a <span class="info">lottery</span> on December 1, 1969 to allocate birthdates at random. Men were then <span class="info">drafted in the order that their birth days were drawn</span>.
      </p>
    </div>
    <div class="col-45">
      <img src="assets/img/lec/Unclesamwantyou.jpg" width=100%>
    </div>
  </div>
  
</section>

<section>
  <h3>The selection process</h3>
  <div class="row">
    <div class="col-40">
      <p>
        The order stipulated that the selection be a <span class="warning">random process</span> based on the birthdays of men born between January 1, 1944 and December 31, 1950.
      </p>
    </div>
    <div class="col-60">
      <img src="assets/img/lec/draft-lottery-1969-1.jpg" width=100% >
    </div>
  </div>
  <p>
    The Selective Service placed the days of the year, including February 29, into <span class="warning">366 plastic capsules</span>. These capsules were placed in a glass <span class="warning">container, mixed, then drawn one at a time</span>.
  </p>
</section>

<section>
  <h3>The selection process</h3>
  <div class="row">
    <div class="col-50">
      <p class="small no-margin-top">
        The first capsule drawn contained the date September 14. This date was <span class="info">assigned the rank 1</span>.
      </p>
    </div>
    <div class="col-50">
      <img src="assets/img/lec/draft-lottery-1969-2.jpeg" width=100%>
    </div>
  </div>
  <div class="row">
    <div class="col-50">
      <img src="assets/img/lec/draft-lottery-1969-3.jpg" width=100%>
    </div>
    <div class="col-50">
      <p class="small no-margin-top">
        The second date drawn, April 24, was <span class="info">assigned rank 2</span>, and so on ...
      </p>
    </div>
  </div>
</section>

<section>
  <h3>The selection process</h3>
  <div class="row">
    <div class="col-35">
      <p class="small no-margin-top">
        Those eligible for the draft who were born on September 14 (<span class="info">rank 1</span>) would be the <span class="info">first selected to serve in Vietnam</span>.
        <br>
        Once all eligible men born on this date were inducted into the service, then the Selective Service would begin to induct men born on April 24 (rank 2), etc ...
      </p>
    </div>
    <div class="col-65">
      <iframe width="560" height="315" src="https://www.youtube.com/embed/XhLbysRh8XY" frameborder="0" allowfullscreen></iframe>
      <p class="small framed border-warning fragment">
        <span class="u em">Note:</span>
        It was estimated by the Pentagon that men with draft numbers 200 to 366, would escape the draft entirely. In fact, no man with a draft number higher than 195 was called to duty.
      </p>
    </div>
  </div>
</section>

<section data-transition="slide-in fade-out">
  <h3>Was the lottery really random?</h3>
  <p class="no-margin-top small">
    What should we expect if we plot the draft number (rank assigned) against the day of the year drawn?
  </p>
  <div class="row">
    <div class="col-75">
      <svg width="100%" viewBox="0 0 432 288" style="margin-top: 0;">
        <use xlink:href="assets/img/lec/draft-lottery-data-scatter.svg#axes_1"></use>
      </svg>
    </div>
    <div class="col-25">
      <p class="no-margin-top small framed border-warning fragment">
        Does the selection process appear random to you?
      </p>
      </p>
    </div>
  </div>
</section>

<section data-transition="fade">
  <h3>Was the lottery really random?</h3>
  <p class="no-margin-top small">
    What should we expect if we plot the draft number (rank assigned) against the day of the year drawn?
  </p>
  <div class="row">
    <div class="col-75">
      <svg width="100%" viewBox="0 0 432 288" style="margin-top: 0;">
        <use xlink:href="assets/img/lec/draft-lottery-data-boxplot.svg#axes_1"></use>
      </svg>
    </div>
    <div class="col-25">
      <p class="no-margin-top small framed border-danger">
        What about now?
      </p>
      </p>
    </div>
  </div>
</section>

<section data-transition="fade">
  <h3>Was the lottery really random?</h3>
  <p class="no-margin-top small">
    What should we expect if we plot the draft number (rank assigned) against the day of the year drawn?
  </p>
  <div class="row">
    <div class="col-75">
      <svg width="100%" viewBox="0 0 432 288" style="margin-top: 0;">
        <use xlink:href="assets/img/lec/draft-lottery-data-scatter.svg#axes_1"></use>
        <use class="fragment" xlink:href="assets/img/lec/draft-lottery-data-scatter.svg#axes_2"></use>
      </svg>
    </div>
    <div class="col-25">
      <p class="no-margin-top small framed border-warning">
        Is it really random?
      </p>
      <p class="small no-margin-top">
        <i class="fa fa-arrow-circle-right warning"></i>
        How could we check the randomness of the data using statistics? <br>(and linear regression <i class="fa fa-smile-o warning"></i>)
      </p>
    </div>
  </div>
</section>

<section data-transition="fade-in slide-out">
  <h3>Was the lottery really random?</h3>
  <p class="no-margin-top small framed border-danger">
    How likely would it be to observe a slope of <span class="warning">$-0.23$</span> if there was no association between the day of the year selected and the rank assigned?
  </p>
  <div class="row">
    <div class="col-40">
      <p class="small no-margin-top fragment">
        <i class="fa fa-arrow-circle-right danger"></i>
        If there was no association, the slope of the
        underlying population shouldn't be different than
        $0$.
      </p>
      <p class="small no-margin-top fragment">
        We could solve this again using confidence intervals, 
        but let's do some null hypothesis testing:
      </p>
      <p class="small sided border-warning no-margin-top fragment">
        $H_0$: $\beta_1=0$ <br>
      </p>
      <p class="small sided border-info no-margin-top fragment">
        $H_a$: $\beta_1\neq0$ <br>
      </p>
    </div>
    <div class="col-60">
      <svg width="100%" viewBox="0 0 432 288" style="margin-top: 0;">
        <use xlink:href="assets/img/lec/draft-lottery-data-scatter.svg#axes_1"></use>
        <use xlink:href="assets/img/lec/draft-lottery-data-scatter.svg#axes_2"></use>
      </svg>
    </div>
  </div>
</section>

<section>
  <h3>Linear regression NHST</h3>
  <img src="assets/img/lec/regression-nhst.svg" 
  class="unbordered flat" width=90%>
</section>


<section data-transition="slide-in fade-out">
  <h3>Testing the randomness of the data</h3>
  <div class="row">
    <div class="col-60">
      <svg width="100%" viewBox="0 0 432 288" style="margin-top: 0;">
        <use xlink:href="assets/img/lec/draft-lottery-data-scatter-nhst.svg#axes_1"></use>
        <use xlink:href="assets/img/lec/draft-lottery-data-scatter-nhst.svg#axes_2"></use>
        <use class="fragment" data-fragment-index=1 xlink:href="assets/img/lec/draft-lottery-data-scatter-nhst.svg#axes_3"></use>
      </svg>
    </div>
    <div class="col-40">
      <p class="no-margin-top small em u fragment" data-fragment-index=2>
        Sampling distribution of the slopes if the null hypothesis was true:
      </p>
      <svg width="100%" viewBox="0 0 432 288" style="margin-top: 0;" class="fragment" data-fragment-index=2">
        <use xlink:href="assets/img/lec/draft-lottery-resampling-nhst.svg#axes_1"></use>
        <use class="fragment" xlink:href="assets/img/lec/draft-lottery-resampling-nhst.svg#axes_2"></use>
        <use class="fragment" xlink:href="assets/img/lec/draft-lottery-resampling-nhst.svg#axes_3"></use>
      </svg>
    </div>
  </div>
  <p class="small no-margin-top fragment">
    <i class="fa fa-arrow-circle-right warning"></i>
    None of the slopes obtained by simulating the no-association condition (null hypothesis)
    are as extreme as the initial slope obtained 
    by finding the best fit on our original dataset.
  </p>
</section>

<section data-transition="fade-in slide-out">
  <h3>Testing the randomness of the data</h3>
  <div class="row">
    <div class="col-60">
      <svg width="100%" viewBox="0 0 432 288" style="margin-top: 0;">
        <use xlink:href="assets/img/lec/draft-lottery-data-scatter-nhst.svg#axes_1"></use>
        <use xlink:href="assets/img/lec/draft-lottery-data-scatter-nhst.svg#axes_2"></use>
        <use xlink:href="assets/img/lec/draft-lottery-data-scatter-nhst.svg#axes_3"></use>
      </svg>
    </div>
    <div class="col-40">
      <p class="no-margin-top small em u" data-fragment-index=2>
        Sampling distribution of the slopes if the null hypothesis was true:
      </p>
      <svg width="100%" viewBox="0 0 432 288" style="margin-top: 0;">
        <use xlink:href="assets/img/lec/draft-lottery-resampling-nhst.svg#axes_1"></use>
        <use xlink:href="assets/img/lec/draft-lottery-resampling-nhst.svg#axes_2"></use>
        <use xlink:href="assets/img/lec/draft-lottery-resampling-nhst.svg#axes_3"></use>
      </svg>
    </div>
  </div>
  <p class="small no-margin-top framed border-warning">
    This strongly suggest that there was, in fact, a negative
    association between the birthday drawn and the draft rank that was assigned to this birthday. <br>
    <i class="fa fa-arrow-circle-right warning"></i> 
    The lottery was <span class="warning">not random</span>!

  </p>
</section>

<section>
  <h3>Change of the lottery process</h3>
  <div class="row">
    <div class="col-70">
      <img src="assets/img/lec/draft-lottery-1969-nytimes-article-title.png" width=100%>
    </div>
    <div class="col-30">
      <p class="no-margin-top small">
        NY Times article - January 4, 1970
      </p>
      <img src="assets/img/lec/draft-lottery-1969-nytimes-article-excerpt.png" width=100%>
    </div>
  </div>
  <p class="small no-margin-top">
    The lottery process was modified for the subsequent years and was shown to be really random .
  </p>
</section>

<section>
  <h3>Summary</h3>
  <div class="row">
    <div class="col-40">
      <p>
      Regression analysis is a powerful method with a broad
      array of applications.
      </p>
      <p>
      The same Null hypothesis and confidence intervals determinations methods as what we used previously on 
      different statistics can be applied to the linear 
      regresssion parameters.
      </p>
    </div>
    <div class="col-60">
      <img src="assets/img/lec/bootstrap-showcase-regression-params.svg" width=100%>
    </div>
  </div>
</section>




<!-- THE END -->
<!-- THE END -->

<!-- <section class='looney-slide' data-state="looney" id="looney" data-menu-title="That's all folks">
<div id="looney_text" style="top:12% !important">
  <div class="looney_char">T</div>
  <div class="looney_char">h</div>
  <div class="looney_char">a</div>
  <div class="looney_char">t</div>
  <div class="looney_char">'</div>
  <div class="looney_char">s</div>
  <div class="looney_char">a</div>
  <div class="looney_char">l</div>
  <div class="looney_char">l</div>
  <div class="looney_char">F</div>
  <div class="looney_char">o</div>
  <div class="looney_char">l</div>
  <div class="looney_char">k</div>
  <div class="looney_char">s</div>
  <div class="looney_char">!</div>
</div>
<div id="looneycircle">
  <i class="looney_i"></i>
  <i class="looney_i"></i>
  <i class="looney_i"></i>
  <i class="looney_i"></i>
  <i class="looney_i"></i>
</div>
</section> -->




<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<!-- - - - - - -    JAVASCRIP LOADING  - - - - - - - - - -->
<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - -->


  <!-- Reveal -->
  <script src="assets/reveal.js-master/lib/js/head.min.js"></script>
  <script src="assets/reveal.js-master/js/reveal.js"></script>
    <!-- Reveal initialization file, including custom event listeners-->
  <script src="assets/js/Reveal-init-gc.js"></script>

  <script src="assets/js/jquery.js"></script>

  <!-- Looney slide -->
  <!-- <script src="assets/looney-slide/looney-reveal.js"></script> -->

  <!-- Google spreadsheet to javascript -->
  <script src='https://cdnjs.cloudflare.com/ajax/libs/tabletop.js/1.5.1/tabletop.min.js'></script>

  <!-- D3 -->
  <script src="assets/js/d3.v4.min.js"></script>
  <!-- <script src="assets/js/d3-selection-multi.v0.4.min.js"></script> -->

    <!-- D3 in REVEAL -->
  <script src="assets/js/d3-in-reveal.js"></script>
    <!-- The D3 config & animations -->
    <script src="assets/d3-anim/js-graphs/d3-in-reveal-config.js"></script>
    <!-- <script src="assets/d3-anim/js-graphs/sampling-distribution.js"></script>
    <script src="assets/d3-anim/js-graphs/live-sampling-words.js"></script>
    <script src="assets/d3-anim/js-graphs/sampling-frame.js"></script>
    <script src="assets/d3-anim/js-graphs/sample_table.js"></script> -->
    <!-- <script src="assets/d3-anim/js-graphs/shuffling.js"></script> -->
    <script src="assets/d3-anim/js-graphs/linear-regression.js"></script>
    <script src="assets/d3-anim/js-graphs/live-regression.js"></script>
    

</body>
</html>
